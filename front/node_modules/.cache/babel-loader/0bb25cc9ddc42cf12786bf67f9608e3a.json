{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/User/Desktop/prueba despliegue/entrega3-web/front/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/User/Desktop/prueba despliegue/entrega3-web/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/User/Desktop/prueba despliegue/entrega3-web/front/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState}from\"react\";import{ResponsiveEmbed}from\"react-bootstrap\";import SimpleMap from\"./SimpleMap\";var DonationForm=function DonationForm(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),maps=_useState2[0],setMaps=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),incorrect=_useState4[0],setIncorrect=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),created=_useState6[0],setCreated=_useState6[1];function resetFormDonacion(){var tipoDonacion=document.getElementById(\"tipo-donacion\");var form=tipoDonacion.parentNode.parentNode;while(form.firstElementChild!==form.lastElementChild){form.removeChild(form.lastElementChild);}}function addTipoYBoton(){//Tipo receptor\nvar receptor=document.createElement(\"div\");receptor.classList.add(\"form-group\");receptor.classList.add(\"input-group\");receptor.innerHTML=\"<div class=\\\"input-group-prepend\\\">\\n        <span class=\\\"input-group-text\\\">\\n          <i class=\\\"fas fa-home\\\"></i>\\n        </span>\\n      </div>\\n      <select class=\\\"form-control\\\" id=\\\"tipo-receptor\\\" required>\\n        <option selected=\\\"\\\" value=\\\"\\\">\\xBFDeseas donar a una fundaci\\xF3n?</option>\\n        <option value=\\\"si\\\">Si</option>\\n        <option value=\\\"no\\\">No, prefiero donar directamente a personas que lo necesitan</option>\\n      </select>\";document.getElementById(\"donacion\").appendChild(receptor);//Botón\n// let button = document.createElement(\"button\");\n// button.type = \"button\";\n// button.id = \"donarbtn\";\n// button.classList.add(\"btn\");\n// button.classList.add(\"btn-primary\");\n// button.classList.add(\"btn-block\");\n// button.textContent = \"Donar\";\nvar Donarbutton=document.getElementById(\"donarbtn\");Donarbutton.addEventListener(\"click\",showMaps);//document.getElementById(\"donacion\").appendChild(Donarbutton);\n}function validarFormulario(){var tipoDonacion=document.getElementById(\"tipo-donacion\");var tipo=tipoDonacion.value;var form=document.getElementById(\"donacion\");if(tipo===\"¿Qué deseas donar?\"){return false;}if(tipo===\"Ropa\"){console.log(\"AAAAAAAAAAAAAA\",typeof tipoDonacion,typeof form);console.log(form.checkValidity());if(form.checkValidity()===false){return false;}}else{if(form.checkValidity()===false){return false;}}return true;}function showMaps(){if(validarFormulario()){var receptor=document.getElementById(\"tipo-receptor\");setIncorrect(false);console.log(receptor.value);if(receptor.value===\"si\"){setMaps(true);}else{setMaps(false);}console.log(\"ACÄ NO \");postDonation();return;}setIncorrect(true);console.log(\"ESTAMOS AQUí ESTAMOS AQUí\",incorrect);}function postDonation(){return _postDonation.apply(this,arguments);}function _postDonation(){_postDonation=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var tipoDonacion,body,fundacion,header,donation;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:tipoDonacion=document.getElementById(\"tipo-donacion\").value;body={};console.log(document.getElementById(\"tipo-receptor\").value);if(document.getElementById(\"tipo-receptor\").value==\"si\"){fundacion=true;}else{fundacion=false;}if(tipoDonacion===\"Ropa\"){body={tipo:\"ropa\",estado:document.getElementById(\"estado-ropa\").value,genero:document.getElementById(\"genero-ropa\").value,edad:document.getElementById(\"edad-ropa\").value,fundacion:fundacion};}else if(tipoDonacion===\"Comida\"){body={tipo:\"comida\",edad:document.getElementById(\"tipo-persona\").value,estado:document.getElementById(\"tipo-comida\").value,fundacion:fundacion};}else if(tipoDonacion===\"Dinero\"){body={tipo:\"dinero\",cant:document.getElementById(\"monto-dinero\").value,mod:document.getElementById(\"modo-pago\").value,fundacion:fundacion};}else{body={tipo:\"otro\",descripcion:document.getElementById(\"otros-value\").value,fundacion:fundacion};}console.log(\"LE BODY\",body);header={\"Content-Type\":\"application/json\"};_context.next=9;return fetch(\"/api/donations/\",{method:\"POST\",headers:header,body:JSON.stringify(body)});case 9:donation=_context.sent;if(donation.ok&&donation.status===200){setCreated(true);setTimeout(function(){setCreated(false);},3000);}case 11:case\"end\":return _context.stop();}}},_callee);}));return _postDonation.apply(this,arguments);}function modifyDonationForm(){var tipoDonacion=document.getElementById(\"tipo-donacion\");console.log(document.getElementById(\"mapa\"));setMaps(false);setIncorrect(false);var tipo=tipoDonacion.value;if(tipo===\"¿Qué deseas donar?\"){//Caso ninguna\nresetFormDonacion();}else if(tipo===\"Ropa\"){//Caso ropa\nresetFormDonacion();var estado=document.createElement(\"div\");estado.classList.add(\"form-group\");estado.classList.add(\"input-group\");estado.innerHTML=\"<div class=\\\"input-group-prepend\\\">\\n          <span class=\\\"input-group-text\\\">\\n              <i class=\\\"fas fa-tshirt\\\"></i>\\n          </span>\\n        </div>\\n        <select class=\\\"form-control\\\" id=\\\"estado-ropa\\\" required>\\n          <option selected=\\\"\\\" value=\\\"\\\">\\xBFEn qu\\xE9 estado se encuentra?</option>\\n          <option>Usada</option>\\n          <option>Nueva</option>\\n          <option>Tengo de ambos tipos</option>\\n        </select>\";var genero=document.createElement(\"div\");genero.classList.add(\"form-group\");genero.classList.add(\"input-group\");genero.innerHTML=\"<div class=\\\"input-group-prepend\\\">\\n          <span class=\\\"input-group-text\\\">\\n            <i class=\\\"fas fa-venus-mars\\\"></i>\\n          </span>\\n        </div>\\n        <select class=\\\"form-control\\\" id=\\\"genero-ropa\\\" required>\\n          <option selected=\\\"\\\" value=\\\"\\\">\\xBFA qui\\xE9n le sirve la ropa?</option>\\n          <option>Mujeres</option>\\n          <option>Hombres</option>\\n          <option>Ambos</option>\\n        </select>\";var persona=document.createElement(\"div\");persona.classList.add(\"form-group\");persona.classList.add(\"input-group\");persona.innerHTML=\"<div class=\\\"input-group-prepend\\\">\\n          <span class=\\\"input-group-text\\\">\\n            <i class=\\\"fas fa-user-friends\\\"></i>\\n          </span>\\n        </div>\\n        <select class=\\\"form-control\\\" id=\\\"edad-ropa\\\" required>\\n          <option selected=\\\"\\\" value=\\\"\\\">\\xBFA que tipo de persona?</option>\\n          <option>Ni\\xF1os</option>\\n          <option>Adultos</option>\\n          <option>Ambos</option>\\n        </select>\";//Agregar los elementos al html\nvar form=document.getElementById(\"donacion\");form.appendChild(estado);form.appendChild(genero);form.appendChild(persona);addTipoYBoton();}else if(tipo===\"Comida\"){//Caso comida\nresetFormDonacion();var receptor=document.createElement(\"div\");receptor.classList.add(\"form-group\");receptor.classList.add(\"input-group\");receptor.innerHTML=\"<div class=\\\"input-group-prepend\\\">\\n          <span class=\\\"input-group-text\\\">\\n            <i class=\\\"fas fa-user-friends\\\"></i>\\n          </span>\\n        </div>\\n        <select class=\\\"form-control\\\" id=\\\"tipo-persona\\\" required>\\n          <option selected=\\\"\\\" value=\\\"\\\">\\xBFA qui\\xE9n quisieras donar?</option>\\n          <option>Ni\\xF1os</option>\\n          <option>Adultos/Ancianos</option>\\n          <option>Cualquiera</option>\\n        </select>\";var tipoComida=document.createElement(\"div\");tipoComida.classList.add(\"form-group\");tipoComida.classList.add(\"input-group\");tipoComida.innerHTML=\"<div class=\\\"input-group-prepend\\\">\\n        <span class=\\\"input-group-text\\\">\\n          <i class=\\\"fas fa-utensils\\\"></i>\\n        </span>\\n      </div>\\n      <select class=\\\"form-control\\\" id=\\\"tipo-comida\\\" required>\\n        <option selected=\\\"\\\" value=\\\"\\\">\\xBFQu\\xE9 tipo de comida es?</option>\\n        <option>Lista para consumir</option>\\n        <option>Requiere preparaci\\xF3n</option>\\n        <option>Tengo de ambos tipos</option>\\n      </select>\";//Agregar los elementos al html\nvar _form=document.getElementById(\"donacion\");_form.appendChild(receptor);_form.appendChild(tipoComida);addTipoYBoton();}else if(tipo===\"Dinero\"){//Caso dinero\nresetFormDonacion();var monto=document.createElement(\"div\");monto.classList.add(\"form-group\");monto.classList.add(\"input-group\");monto.innerHTML=\"<div class=\\\"input-group-prepend\\\">\\n        <span class=\\\"input-group-text\\\">\\n          <i class=\\\"fas fa-dollar-sign\\\"></i>\\n        </span>\\n      </div>\\n      <input required type=\\\"number\\\" value=\\\"50000\\\" min=\\\"1000\\\" step=\\\"1000\\\" data-number-to-fixed=\\\"2\\\" data-number-stepfactor=\\\"1000\\\" class=\\\"form-control currency\\\" id=\\\"monto-dinero\\\" />\";/*     if(pagos.style.display===\"none\"){\r\n        pagos.style.display=\"block\"\r\n      } */var modoPago=document.createElement(\"div\");modoPago.classList.add(\"form-group\");modoPago.classList.add(\"input-group\");modoPago.innerHTML=\"<div class=\\\"input-group-prepend\\\">\\n        <span class=\\\"input-group-text\\\">\\n          <i class=\\\"fas fa-money-bill-wave\\\"></i>\\n        </span>\\n      </div>\\n      <select class=\\\"form-control\\\" id=\\\"modo-pago\\\" required>\\n        <option selected=\\\"\\\" value=\\\"\\\">\\xBFQu\\xE9 modalidad prefieres?</option>\\n        <option>Directamente con el beneficiario</option>\\n        <option>Pago online inmediato</option>\\n      </select>\\n      \";//Agregar los elementos al html\nvar _form2=document.getElementById(\"donacion\");_form2.appendChild(monto);_form2.appendChild(modoPago);addTipoYBoton();}else{//Caso otros\nresetFormDonacion();var otro=document.createElement(\"div\");otro.classList.add(\"form-group\");otro.innerHTML=\"<label for=\\\"otros-value\\\">Por favor especifica que deseas donar</label>\\n      <textarea required class=\\\"form-control\\\" id=\\\"otros-value\\\" rows=\\\"3\\\"></textarea>\";//Agregar los elementos al html\nvar _form3=document.getElementById(\"donacion\");_form3.appendChild(otro);addTipoYBoton();}}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"section\",{id:\"donation\",children:[/*#__PURE__*/_jsx(\"a\",{name:\"Donar\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card bg-light\",id:\"donationDiv\",children:/*#__PURE__*/_jsxs(\"article\",{className:\"card-body mx-auto\",style:{maxwidth:\"400px\"},children:[/*#__PURE__*/_jsx(\"a\",{name:\"Registro\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"card-title mt-3 text-center\",children:\"\\xBFQuieres realizar una donaci\\xF3n?\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-center\",children:\"\\xA1Gracias por ayudar!\"}),/*#__PURE__*/_jsx(\"form\",{id:\"donacion\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group input-group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-group-prepend\",children:/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hand-holding-usd\"})})}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",id:\"tipo-donacion\",onChange:modifyDonationForm,children:[/*#__PURE__*/_jsx(\"option\",{defaultValue:\"\",children:\"\\xBFQu\\xE9 deseas donar?\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Ropa\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Comida\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Dinero\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Otros\"})]})]})}),incorrect&&/*#__PURE__*/_jsx(\"label\",{className:\"incorrect\",id:\"lbl-incorrect\",children:\"Aseg\\xFArate de llenar todos los campos correctamente\"}),/*#__PURE__*/_jsx(\"button\",{onChange:showMaps,type:\"button\",id:\"donarbtn\",className:\"btn btn-primary btn-block\",children:\"Donar\"}),created&&/*#__PURE__*/_jsx(\"label\",{style:{color:'green'},children:\"Donaci\\xF3n creada correctamente\"})]})})]}),maps&&/*#__PURE__*/_jsx(SimpleMap,{id:\"mapa\"})]});};export default DonationForm;","map":{"version":3,"sources":["C:/Users/User/Desktop/prueba despliegue/entrega3-web/front/src/components/DonationForm.js"],"names":["React","useState","ResponsiveEmbed","SimpleMap","DonationForm","maps","setMaps","incorrect","setIncorrect","created","setCreated","resetFormDonacion","tipoDonacion","document","getElementById","form","parentNode","firstElementChild","lastElementChild","removeChild","addTipoYBoton","receptor","createElement","classList","add","innerHTML","appendChild","Donarbutton","addEventListener","showMaps","validarFormulario","tipo","value","console","log","checkValidity","postDonation","body","fundacion","estado","genero","edad","cant","mod","descripcion","header","fetch","method","headers","JSON","stringify","donation","ok","status","setTimeout","modifyDonationForm","persona","tipoComida","monto","modoPago","otro","maxwidth","color"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { ResponsiveEmbed } from \"react-bootstrap\";\r\nimport SimpleMap from \"./SimpleMap\";\r\n\r\nconst DonationForm = () => {\r\n  const [maps, setMaps] = useState(false);\r\n\r\n  const [incorrect, setIncorrect] = useState(false);\r\n\r\n  const [created, setCreated] = useState(false);\r\n\r\n  function resetFormDonacion() {\r\n    let tipoDonacion = document.getElementById(\"tipo-donacion\");\r\n    let form = tipoDonacion.parentNode.parentNode;\r\n\r\n    while (form.firstElementChild !== form.lastElementChild) {\r\n      form.removeChild(form.lastElementChild);\r\n    }\r\n  }\r\n\r\n  function addTipoYBoton() {\r\n    //Tipo receptor\r\n    let receptor = document.createElement(\"div\");\r\n    receptor.classList.add(\"form-group\");\r\n    receptor.classList.add(\"input-group\");\r\n    receptor.innerHTML = `<div class=\"input-group-prepend\">\r\n        <span class=\"input-group-text\">\r\n          <i class=\"fas fa-home\"></i>\r\n        </span>\r\n      </div>\r\n      <select class=\"form-control\" id=\"tipo-receptor\" required>\r\n        <option selected=\"\" value=\"\">¿Deseas donar a una fundación?</option>\r\n        <option value=\"si\">Si</option>\r\n        <option value=\"no\">No, prefiero donar directamente a personas que lo necesitan</option>\r\n      </select>`;\r\n    document.getElementById(\"donacion\").appendChild(receptor);\r\n\r\n    //Botón\r\n    // let button = document.createElement(\"button\");\r\n    // button.type = \"button\";\r\n    // button.id = \"donarbtn\";\r\n    // button.classList.add(\"btn\");\r\n    // button.classList.add(\"btn-primary\");\r\n    // button.classList.add(\"btn-block\");\r\n    // button.textContent = \"Donar\";\r\n\r\n    let Donarbutton = document.getElementById(\"donarbtn\");\r\n    Donarbutton.addEventListener(\"click\", showMaps);\r\n    //document.getElementById(\"donacion\").appendChild(Donarbutton);\r\n  }\r\n\r\n  function validarFormulario() {\r\n    let tipoDonacion = document.getElementById(\"tipo-donacion\");\r\n\r\n    let tipo = tipoDonacion.value;\r\n    let form = document.getElementById(\"donacion\");\r\n    if (tipo === \"¿Qué deseas donar?\") {\r\n      return false;\r\n    }\r\n    if (tipo === \"Ropa\") {\r\n      console.log(\"AAAAAAAAAAAAAA\", typeof tipoDonacion, typeof form);\r\n      console.log(form.checkValidity());\r\n      if (form.checkValidity() === false) {\r\n        return false;\r\n      }\r\n    } else {\r\n      if (form.checkValidity() === false) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  function showMaps() {\r\n    if (validarFormulario()) {\r\n      let receptor = document.getElementById(\"tipo-receptor\");\r\n      setIncorrect(false);\r\n      console.log(receptor.value);\r\n      if (receptor.value === \"si\") {\r\n        setMaps(true);\r\n      } else {\r\n        setMaps(false);\r\n      }\r\n      console.log(\"ACÄ NO \");\r\n      postDonation();\r\n      return;\r\n    }\r\n    setIncorrect(true);\r\n    console.log(\"ESTAMOS AQUí ESTAMOS AQUí\", incorrect);\r\n  }\r\n\r\n  async function postDonation() {\r\n    let tipoDonacion = document.getElementById(\"tipo-donacion\").value;\r\n    let body = {};\r\n    let fundacion;\r\n    console.log(document.getElementById(\"tipo-receptor\").value)\r\n    if(document.getElementById(\"tipo-receptor\").value == \"si\"){\r\n      fundacion = true;\r\n    } else {\r\n      fundacion = false;\r\n    }\r\n    if (tipoDonacion === \"Ropa\") {\r\n      body = {\r\n        tipo: \"ropa\",\r\n        estado: document.getElementById(\"estado-ropa\").value,\r\n        genero: document.getElementById(\"genero-ropa\").value,\r\n        edad: document.getElementById(\"edad-ropa\").value,\r\n        fundacion: fundacion,\r\n          \r\n      };\r\n    } else if (tipoDonacion === \"Comida\") {\r\n      body = {\r\n        tipo: \"comida\",\r\n        edad: document.getElementById(\"tipo-persona\").value,\r\n        estado: document.getElementById(\"tipo-comida\").value,\r\n        fundacion: fundacion,\r\n         \r\n      };\r\n    } else if (tipoDonacion === \"Dinero\") {\r\n      body = {\r\n        tipo: \"dinero\",\r\n        cant: document.getElementById(\"monto-dinero\").value,\r\n        mod: document.getElementById(\"modo-pago\").value,\r\n        fundacion: fundacion,\r\n          \r\n      };\r\n    } else {\r\n      body = {\r\n        tipo: \"otro\",\r\n        descripcion: document.getElementById(\"otros-value\").value,\r\n        fundacion: fundacion\r\n      };\r\n    }\r\n    console.log(\"LE BODY\", body)\r\n    const header = { \"Content-Type\": \"application/json\" };\r\n    let donation = await await fetch(\"/api/donations/\", {\r\n      method: \"POST\",\r\n      headers: header,\r\n      body: JSON.stringify(body),\r\n    });\r\n    if (donation.ok && donation.status === 200) {\r\n      setCreated(true);  \r\n      setTimeout(()=>{\r\n        setCreated(false);\r\n      },3000)\r\n    }\r\n  }\r\n\r\n  function modifyDonationForm() {\r\n    let tipoDonacion = document.getElementById(\"tipo-donacion\");\r\n    console.log(document.getElementById(\"mapa\"));\r\n    setMaps(false);\r\n    setIncorrect(false);\r\n    let tipo = tipoDonacion.value;\r\n    if (tipo === \"¿Qué deseas donar?\") {\r\n      //Caso ninguna\r\n      resetFormDonacion();\r\n    } else if (tipo === \"Ropa\") {\r\n      //Caso ropa\r\n      resetFormDonacion();\r\n      let estado = document.createElement(\"div\");\r\n      estado.classList.add(\"form-group\");\r\n      estado.classList.add(\"input-group\");\r\n      estado.innerHTML = `<div class=\"input-group-prepend\">\r\n          <span class=\"input-group-text\">\r\n              <i class=\"fas fa-tshirt\"></i>\r\n          </span>\r\n        </div>\r\n        <select class=\"form-control\" id=\"estado-ropa\" required>\r\n          <option selected=\"\" value=\"\">¿En qué estado se encuentra?</option>\r\n          <option>Usada</option>\r\n          <option>Nueva</option>\r\n          <option>Tengo de ambos tipos</option>\r\n        </select>`;\r\n\r\n      let genero = document.createElement(\"div\");\r\n      genero.classList.add(\"form-group\");\r\n      genero.classList.add(\"input-group\");\r\n      genero.innerHTML = `<div class=\"input-group-prepend\">\r\n          <span class=\"input-group-text\">\r\n            <i class=\"fas fa-venus-mars\"></i>\r\n          </span>\r\n        </div>\r\n        <select class=\"form-control\" id=\"genero-ropa\" required>\r\n          <option selected=\"\" value=\"\">¿A quién le sirve la ropa?</option>\r\n          <option>Mujeres</option>\r\n          <option>Hombres</option>\r\n          <option>Ambos</option>\r\n        </select>`;\r\n\r\n      let persona = document.createElement(\"div\");\r\n      persona.classList.add(\"form-group\");\r\n      persona.classList.add(\"input-group\");\r\n      persona.innerHTML = `<div class=\"input-group-prepend\">\r\n          <span class=\"input-group-text\">\r\n            <i class=\"fas fa-user-friends\"></i>\r\n          </span>\r\n        </div>\r\n        <select class=\"form-control\" id=\"edad-ropa\" required>\r\n          <option selected=\"\" value=\"\">¿A que tipo de persona?</option>\r\n          <option>Niños</option>\r\n          <option>Adultos</option>\r\n          <option>Ambos</option>\r\n        </select>`;\r\n      //Agregar los elementos al html\r\n      const form = document.getElementById(\"donacion\");\r\n      form.appendChild(estado);\r\n      form.appendChild(genero);\r\n      form.appendChild(persona);\r\n      addTipoYBoton();\r\n    } else if (tipo === \"Comida\") {\r\n      //Caso comida\r\n      resetFormDonacion();\r\n\r\n      let receptor = document.createElement(\"div\");\r\n      receptor.classList.add(\"form-group\");\r\n      receptor.classList.add(\"input-group\");\r\n      receptor.innerHTML = `<div class=\"input-group-prepend\">\r\n          <span class=\"input-group-text\">\r\n            <i class=\"fas fa-user-friends\"></i>\r\n          </span>\r\n        </div>\r\n        <select class=\"form-control\" id=\"tipo-persona\" required>\r\n          <option selected=\"\" value=\"\">¿A quién quisieras donar?</option>\r\n          <option>Niños</option>\r\n          <option>Adultos/Ancianos</option>\r\n          <option>Cualquiera</option>\r\n        </select>`;\r\n\r\n      let tipoComida = document.createElement(\"div\");\r\n      tipoComida.classList.add(\"form-group\");\r\n      tipoComida.classList.add(\"input-group\");\r\n      tipoComida.innerHTML = `<div class=\"input-group-prepend\">\r\n        <span class=\"input-group-text\">\r\n          <i class=\"fas fa-utensils\"></i>\r\n        </span>\r\n      </div>\r\n      <select class=\"form-control\" id=\"tipo-comida\" required>\r\n        <option selected=\"\" value=\"\">¿Qué tipo de comida es?</option>\r\n        <option>Lista para consumir</option>\r\n        <option>Requiere preparación</option>\r\n        <option>Tengo de ambos tipos</option>\r\n      </select>`;\r\n\r\n      //Agregar los elementos al html\r\n      const form = document.getElementById(\"donacion\");\r\n      form.appendChild(receptor);\r\n      form.appendChild(tipoComida);\r\n      addTipoYBoton();\r\n    } else if (tipo === \"Dinero\") {\r\n      //Caso dinero\r\n      resetFormDonacion();\r\n      let monto = document.createElement(\"div\");\r\n      monto.classList.add(\"form-group\");\r\n      monto.classList.add(\"input-group\");\r\n      monto.innerHTML = `<div class=\"input-group-prepend\">\r\n        <span class=\"input-group-text\">\r\n          <i class=\"fas fa-dollar-sign\"></i>\r\n        </span>\r\n      </div>\r\n      <input required type=\"number\" value=\"50000\" min=\"1000\" step=\"1000\" data-number-to-fixed=\"2\" data-number-stepfactor=\"1000\" class=\"form-control currency\" id=\"monto-dinero\" />`;\r\n      /*     if(pagos.style.display===\"none\"){\r\n        pagos.style.display=\"block\"\r\n      } */\r\n      let modoPago = document.createElement(\"div\");\r\n      modoPago.classList.add(\"form-group\");\r\n      modoPago.classList.add(\"input-group\");\r\n      modoPago.innerHTML = `<div class=\"input-group-prepend\">\r\n        <span class=\"input-group-text\">\r\n          <i class=\"fas fa-money-bill-wave\"></i>\r\n        </span>\r\n      </div>\r\n      <select class=\"form-control\" id=\"modo-pago\" required>\r\n        <option selected=\"\" value=\"\">¿Qué modalidad prefieres?</option>\r\n        <option>Directamente con el beneficiario</option>\r\n        <option>Pago online inmediato</option>\r\n      </select>\r\n      `;\r\n\r\n      //Agregar los elementos al html\r\n      const form = document.getElementById(\"donacion\");\r\n      form.appendChild(monto);\r\n      form.appendChild(modoPago);\r\n      addTipoYBoton();\r\n    } else {\r\n      //Caso otros\r\n      resetFormDonacion();\r\n\r\n      let otro = document.createElement(\"div\");\r\n      otro.classList.add(\"form-group\");\r\n      otro.innerHTML = `<label for=\"otros-value\">Por favor especifica que deseas donar</label>\r\n      <textarea required class=\"form-control\" id=\"otros-value\" rows=\"3\"></textarea>`;\r\n\r\n      //Agregar los elementos al html\r\n      const form = document.getElementById(\"donacion\");\r\n      form.appendChild(otro);\r\n      addTipoYBoton();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <section id=\"donation\">\r\n        <a name=\"Donar\"></a>\r\n        <div className=\"card bg-light\" id=\"donationDiv\">\r\n          <article className=\"card-body mx-auto\" style={{ maxwidth: \"400px\" }}>\r\n            <a name=\"Registro\"></a>\r\n            <h4 className=\"card-title mt-3 text-center\">\r\n              ¿Quieres realizar una donación?\r\n            </h4>\r\n            <p className=\"text-center\">¡Gracias por ayudar!</p>\r\n            <form id=\"donacion\">\r\n              <div className=\"form-group input-group\">\r\n                <div className=\"input-group-prepend\">\r\n                  <span className=\"input-group-text\">\r\n                    <i className=\"fas fa-hand-holding-usd\"></i>\r\n                  </span>\r\n                </div>\r\n                <select\r\n                  className=\"form-control\"\r\n                  id=\"tipo-donacion\"\r\n                  onChange={modifyDonationForm}\r\n                >\r\n                  <option defaultValue=\"\">¿Qué deseas donar?</option>\r\n                  <option>Ropa</option>\r\n                  <option>Comida</option>\r\n                  <option>Dinero</option>\r\n                  <option>Otros</option>\r\n                </select>\r\n              </div>\r\n            </form>\r\n\r\n            {incorrect && (\r\n              <label className=\"incorrect\" id=\"lbl-incorrect\">\r\n                Asegúrate de llenar todos los campos correctamente\r\n              </label>\r\n            )}\r\n\r\n            <button\r\n              onChange={showMaps}\r\n              type=\"button\"\r\n              id=\"donarbtn\"\r\n              className=\"btn btn-primary btn-block\"\r\n            >\r\n              Donar\r\n            </button>\r\n            {created && (\r\n              <label style={{color: 'green'}}>\r\n                Donación creada correctamente\r\n              </label>\r\n            )}\r\n          </article>\r\n        </div>\r\n      </section>\r\n      {maps && <SimpleMap id=\"mapa\"></SimpleMap>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DonationForm;\r\n"]},"metadata":{},"sourceType":"module"}