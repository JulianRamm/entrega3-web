{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/User/Desktop/prueba despliegue/entrega3-web/front/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"C:/Users/User/Desktop/prueba despliegue/entrega3-web/front/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:/Users/User/Desktop/prueba despliegue/entrega3-web/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/User/Desktop/prueba despliegue/entrega3-web/front/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState}from'react';import'../styles/auth.css';import{HashLink as Link}from'react-router-hash-link';import{useHistory}from'react-router-dom';var Login=function Login(props){var setUser=props.user;var _useState=useState({correo:'',password:'',existeUsuario:true,correctPassword:true}),_useState2=_slicedToArray(_useState,2),loginInfo=_useState2[0],setLoginInfo=_useState2[1];var history=useHistory();function onSubmit(_x){return _onSubmit.apply(this,arguments);}function _onSubmit(){_onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();setLoginInfo(_objectSpread(_objectSpread({},loginInfo),{existeUsuario:true}));setLoginInfo(_objectSpread(_objectSpread({},loginInfo),{correctPassword:true}));_context.prev=3;_context.next=6;return fetch(\"/api/users/\".concat(loginInfo.correo));case 6:_context.next=8;return _context.sent.json();case 8:user=_context.sent;if(user.clave===loginInfo.password){localStorage.setItem('user',JSON.stringify(user));setUser(user);history.push('/');}else{setLoginInfo(_objectSpread(_objectSpread({},loginInfo),{correctPassword:false}));}_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](3);setLoginInfo(_objectSpread(_objectSpread({},loginInfo),{existeUsuario:false}));case 15:case\"end\":return _context.stop();}}},_callee,null,[[3,12]]);}));return _onSubmit.apply(this,arguments);}return/*#__PURE__*/_jsx(\"section\",{id:\"Login\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container login-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 login-form-1\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Hola! Bienvenido de nuevo\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,id:\"login-form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{id:\"login-email\",type:\"email\",className:\"form-control\",placeholder:\"Correo *\",value:loginInfo.correo,onChange:function onChange(e){setLoginInfo(_objectSpread(_objectSpread({},loginInfo),{correo:e.target.value}));},defaultValue:\"\",required:true})}),/*#__PURE__*/_jsx(\"div\",{className:loginInfo.existeUsuario?\" d-none \":'d-block m-2 font-weight-bold warning-red',children:\"\\xA1No se encontr\\xF3 un usuario con este correo!\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{id:\"login-password\",type:\"password\",className:\"form-control\",placeholder:\"Contrase\\xF1a *\",defaultValue:\"\",value:loginInfo.password,onChange:function onChange(e){setLoginInfo(_objectSpread(_objectSpread({},loginInfo),{password:e.target.value}));},required:true})}),/*#__PURE__*/_jsx(\"div\",{className:loginInfo.correctPassword?\" d-none \":'d-block m-2 font-weight-bold warning-red',children:\"Contrase\\xF1a incorrecta\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",id:\"loginbtn\",className:\"btnSubmit btn btn-primary btn-block\",defaultValue:\"Ingresar\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"a\",{href:\"olvidaste-contrasenia\",className:\"ForgetPwd\",children:\"Olvidaste tu contrase\\xF1a?\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(Link,{id:\"registerLink\",className:\"ForgetPwd\",to:\"/register\",children:\"Registrate Aqui\"})})]})]})})})});};export default Login;","map":{"version":3,"sources":["C:/Users/User/Desktop/prueba despliegue/entrega3-web/front/src/components/auth/Login.js"],"names":["React","useState","HashLink","Link","useHistory","Login","props","setUser","user","correo","password","existeUsuario","correctPassword","loginInfo","setLoginInfo","history","onSubmit","e","preventDefault","fetch","json","clave","localStorage","setItem","JSON","stringify","push","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport '../styles/auth.css'\r\nimport { HashLink as Link } from 'react-router-hash-link';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst Login = (props) => {\r\n\r\n  const setUser = props.user;\r\n\r\n  const [loginInfo, setLoginInfo] = useState({\r\n    correo: '',\r\n    password: '',\r\n    existeUsuario: true,\r\n    correctPassword: true,\r\n  })\r\n\r\n  const history = useHistory()\r\n\r\n  async function onSubmit(e) {\r\n    e.preventDefault();\r\n    setLoginInfo({ ...loginInfo, ...{ existeUsuario: true } })\r\n    setLoginInfo({ ...loginInfo, ...{ correctPassword: true } })\r\n\r\n    try {\r\n      let user = await (await fetch(`/api/users/${loginInfo.correo}`)).json()\r\n\r\n      if (user.clave === loginInfo.password) {\r\n        localStorage.setItem('user', JSON.stringify(user))\r\n        setUser(user)\r\n        history.push('/')\r\n      }\r\n      else {\r\n        setLoginInfo({ ...loginInfo, ...{ correctPassword: false } })\r\n\r\n      }\r\n\r\n    } catch (error) {\r\n      setLoginInfo({ ...loginInfo, ...{ existeUsuario: false } })\r\n\r\n    }\r\n\r\n  }\r\n\r\n\r\n  return (\r\n\r\n    <section id=\"Login\" >\r\n      <div className=\"container login-container\" >\r\n        <div className=\"row justify-content-center\">\r\n          <div className=\"col-md-6 login-form-1\">\r\n            <h3>Hola! Bienvenido de nuevo</h3>\r\n            <form onSubmit={onSubmit} id=\"login-form\">\r\n              <div className=\"form-group\">\r\n                <input\r\n                  id=\"login-email\"\r\n                  type=\"email\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Correo *\"\r\n                  value={loginInfo.correo}\r\n                  onChange={e => {\r\n                    setLoginInfo({ ...loginInfo, ...{ correo: e.target.value } })\r\n                  }}\r\n                  defaultValue=\"\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div\r\n                className={loginInfo.existeUsuario ?\r\n                  \" d-none \" : 'd-block m-2 font-weight-bold warning-red'}\r\n              >\r\n                ¡No se encontró un usuario con este correo!\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <input\r\n                  id=\"login-password\"\r\n                  type=\"password\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Contraseña *\"\r\n                  defaultValue=\"\"\r\n                  value={loginInfo.password}\r\n                  onChange={e => {\r\n                    setLoginInfo({ ...loginInfo, ...{ password: e.target.value } })\r\n                  }}\r\n                  required\r\n                />\r\n              </div>\r\n              <div\r\n                className={loginInfo.correctPassword ?\r\n                  \" d-none \" : 'd-block m-2 font-weight-bold warning-red'}\r\n              >\r\n                Contraseña incorrecta\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <input\r\n                  type=\"submit\"\r\n                  id=\"loginbtn\"\r\n                  className=\"btnSubmit btn btn-primary btn-block\"\r\n                  defaultValue=\"Ingresar\"\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <a href=\"olvidaste-contrasenia\" className=\"ForgetPwd\">Olvidaste tu contraseña?</a>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <Link id=\"registerLink\" className=\"ForgetPwd\" to=\"/register\">Registrate Aqui</Link>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n\r\n  );\r\n\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}